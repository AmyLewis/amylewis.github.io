<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>知乎容器化构建系统设计和实践 | Amyy Lewis</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="life tech"><meta name="description" content="Fledgling Developer | Backpacker | Doing all I can to be a better girl."><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://amylewis.github.io/2018/10/01/CI-design/index.html"><link rel="icon" type="image/png" href="http://oo12ugek5.bkt.clouddn.com/blog/images/favicon.ico" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="AmyLewis" type="application/atom+xml"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-66043212-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-66043212-2")</script><link rel="stylesheet" href="/scss/views/page/post.css"><meta name="generator" content="Hexo 6.3.0"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(https://user-images.githubusercontent.com/3325198/52893052-6d1d2d80-31d3-11e9-91c2-736385c3278a.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="AmyLewis" alt="AmyLewis"><img src="https://user-images.githubusercontent.com/3325198/52892707-fc284680-31cf-11e9-932d-e3cde3ef02f3.png" alt="AmyLewis"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="https://user-images.githubusercontent.com/3325198/52894689-263a3280-31e9-11e9-9d0f-a1a9be83c01f.jpg" alt="知乎容器化构建系统设计和实践"></div><header class="post__info"><h1 class="post__title">知乎容器化构建系统设计和实践</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a target="_blank" rel="noopener" href="https://www.github.com/amylewis">amy</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2018-10-01</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/tech/">Tech</a></li></ul></div></div></header><div class="post__content"><p><strong>Table of content:</strong></p><div class="toc"><ul><li><a href="#guan-yu">关于</a></li><li><a href="#bei-jing">背景</a></li><li><a href="#wan-zheng-de-sheng-ming-zhou-qi">完整的生命周期</a></li><li><a href="#da-dao-de-mu-biao-yi-ji-zhong-jian-yu-dao-de-wen-ti">达到的目标以及中间遇到的问题</a><ul><li><a href="#1-jiao-di-de-jie-ru-cheng-ben-jiao-gao-de-ding-zhi-neng-li">1. 较低的接入成本，较高的定制能力</a><ul><li><a href="#sheng-ming-huan-jing-he-yi-lai">声明环境和依赖</a></li><li><a href="#gou-jian-xiang-guan-he-xin-huan-jie">构建相关核心环节</a></li><li><a href="#sheng-ming-artifact-lei-xing">声明 Artifact 类型</a></li></ul></li><li><a href="#2-yu-yan-kai-fang-xing">2. 语言开放性</a></li><li><a href="#3-jian-shao-bu-wen-ding-gou-jian-jiang-di-wen-ti-fu-xian-cheng-ben">3. 减少不稳定构建，降低问题复现成本</a><ul><li><a href="#huan-cun-de-she-ji">缓存的设计</a></li><li><a href="#yi-lai-huo-qu-wen-ding-xing">依赖获取稳定性</a></li><li><a href="#geng-di-de-pai-cha-cuo-wu-de-cheng-ben">更低的排查错误的成本</a></li></ul></li><li><a href="#4-gui-fan-he-biao-zhun-de-luo-di-zhua-shou">4. 规范和标准的落地抓手</a></li><li><a href="#5-gao-ke-yong-he-ke-kuo-zhan-de-ji-qun">5. 高可用和可扩展的集群</a><ul><li><a href="#job-diao-du-ce-lue">Job 调度策略</a></li><li><a href="#gao-ke-yong-she-ji">高可用设计</a></li><li><a href="#jian-kong-he-bao-jing">监控和报警</a></li></ul></li></ul></li><li><a href="#hou-xu-de-ji-hua">后续的计划</a></li><li><a href="#can-kao-zi-liao">参考资料</a></li></ul></div>首发自知乎：https://zhuanlan.zhihu.com/p/45694823<h1><span id="guan-yu">关于</span><a href="#guan-yu" class="header-anchor"></a></h1><p>知乎应用平台团队基于 Jenkins Pipeline 和 Docker 打造了一套持续集成系统。Jenkins Master 和 Slave 基于 Docker 部署，每次构建也是在容器中进行。目前有三千个 Jenkins Job，支撑着整个团队每日近万次的构建和部署量。</p><p>整个系统的设计目标是具备以下的能力：</p><ul><li>较低的应用接入成本，较高的定制能力：写一个构建系统配置文件成本要尽可能简单方便，或者可以通过模板一键创建，但又要能满足应用的各种定制化的需求。</li><li>具备语言开放性和部署多样性：平台需要能支撑业务技术选型上的多语言，同时，要能满足应用不同的部署类型，如单纯的打包发布，或者进一步部署到物理机、容器、离线任务平台等。</li><li>构建快和稳定，复现问题成本低：每次构建都在干净的容器中，减少非应用本身问题带来的构建异常。同时，如果构建出现问题，在权限控制的前提下，要能方便开发者自己调试和排查。</li><li>推动业界标准以及最佳实践，同时在代码合并之前就能更好把控住质量。</li><li>整个集群高可用，可扩展，以及具备较低的运维成本。</li></ul><h1><span id="bei-jing">背景</span><a href="#bei-jing" class="header-anchor"></a></h1><p>知乎选用 Jenkins 作为构建方案，因其强大和灵活，且有非常丰富的插件可供使用和扩展。</p><p>早期，应用数量较少时，每个开发者都手动创建并维护着几个 Job，各自编写 Jenkins Job 的配置，以及手动触发构建。随着服务化以及业务类型，开发者以及 Jenkins Job 数量的增加，我们面临了以下的问题：</p><p>每个开发者都需要去理解 Jenkins 的基本配置和触发逻辑，使得配置创建和维护成本高。<br>构建在物理机上进行，每个应用可能有着不同的版本依赖，构建时会遇到版本冲突，甚至上线之后发现行为不一致导致故障等。<br>构建一旦失败，需要开发者能登录 Jenkins Slave 所在的物理机进行调试，权限控制成为了一个问题<br>于是，一个能方便应用接入构建部署的系统，成为了必须。</p><h1><span id="wan-zheng-de-sheng-ming-zhou-qi">完整的生命周期</span><a href="#wan-zheng-de-sheng-ming-zhou-qi" class="header-anchor"></a></h1><p>知乎的构建工作流主要是以下两种场景：</p><ul><li>只有 Master 分支的代码可以用于线上部署，但支持指定任意的分支进行构建</li><li>所有对 Master 分支的修改必须通过 Merge Request 来进行。为了避免潜在代码冲突导致测试结果不准的情况，对 Merge Request 上的代码进行构建前，会模拟跟 Master 分支的代码做一次合并。<br>一个 Commit 从提交到最后部署，会经历以下的环节：</li></ul><p><img src="https://pic2.zhimg.com/80/v2-6b5f8ce11e87012986069c4a5a16117b_hd.jpg"></p><ol><li>开发者提交代码到 GitLab。</li><li>GitLab 通过 Webhook 通知到 ZAE (Zhihu App Engine， 知乎的私有云平台)。</li><li>ZAE 将构建的上下文信息，如 GitLab 仓库 ID，ZAE 应用信息给到构建系统 Lavie。目前只处理用户提交 MR 以及合并到 Master 分支的事件。<br>构建系统 Lavie 读取应用仓库中的配置文件后生成配置，触发一个构建。在构建过程中获取动态生成的 Jenkinsfile，生成 Dockerfile 构建出应用的镜像，并跑起容器，在容器中执行构建，测试等应用指定的步骤。</li><li>测试成功之后，分别往物理机部署平台，容器部署平台，离线任务平台上传 Artifact，注册待发布版本的信息，并 Slack 通知用户结果。<br>构建结束，用户在 ZAE 上可以进行后续操作，如选择一个候选版本进行部署。</li><li>每个应用的拉取代码，准备数据库，处理测试覆盖率，发送消息，候选版本的注册等通用的部分，都会由构建系统统一处理，而接入构建系统的应用，只需要在代码仓库中包含一个约定格式的配置文件。</li></ol><h1><span id="da-dao-de-mu-biao-yi-ji-zhong-jian-yu-dao-de-wen-ti">达到的目标以及中间遇到的问题</span><a href="#da-dao-de-mu-biao-yi-ji-zhong-jian-yu-dao-de-wen-ti" class="header-anchor"></a></h1><h2><span id="1-jiao-di-de-jie-ru-cheng-ben-jiao-gao-de-ding-zhi-neng-li">1. 较低的接入成本，较高的定制能力</span><a href="#1-jiao-di-de-jie-ru-cheng-ben-jiao-gao-de-ding-zhi-neng-li" class="header-anchor"></a></h2><p>构建系统去理解应用要做的事情靠的是约定格式的 yaml 配置文件，而我们希望这个配置文件能足够简单，声明上必要的部分，如环境、构建、测试步骤就能开始构建。</p><p>同时，也要有能力提供更多的定制功能让应用可以使用，如选择系统依赖和版本，缓存的路径，是否需要构建系统提供 MySQL 以及需要的 MySQL 版本等。以及可以根据应用的类别自动生成配置文件。</p><p>一个最简单的应用场景:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">base_image: python2/jessie</span><br><span class="line"></span><br><span class="line">build:</span><br><span class="line">  - buildout</span><br><span class="line"></span><br><span class="line">test:</span><br><span class="line">  unittest:</span><br><span class="line">    - bin/test --cover-package=pin --with-xunit --with-coverage --cover-xml</span><br></pre></td></tr></table></figure><p>一个更多定制化的场景:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">base_image: py_node/jessie</span><br><span class="line">deps:</span><br><span class="line">  - libffi-dev</span><br><span class="line">build:</span><br><span class="line">  - buildout</span><br><span class="line">  - cd admin &amp;&amp; npm install &amp;&amp; gulp</span><br><span class="line">test:</span><br><span class="line">  deps:</span><br><span class="line">    - mysql:5.7</span><br><span class="line">  unittest:</span><br><span class="line">    - bin/test --cover-package=lived,liveweb --with-xunit --with-coverage</span><br><span class="line">  coverage_test:</span><br><span class="line">    report_fpath: coverage.xml</span><br><span class="line">post_build:</span><br><span class="line">  scripts:</span><br><span class="line">    - /bin/bash scripts/release_sentry.sh</span><br><span class="line">artifacts:</span><br><span class="line">  targets:</span><br><span class="line">    - docker</span><br><span class="line">    - tarball</span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">    - admin/static/components</span><br><span class="line">    - admin/node_modules</span><br></pre></td></tr></table></figure><p>为了尽可能满足多样化的业务场景，我们主要将配置文件分为三部分：声明环境和依赖、构建相关核心环节、声明 Artifact 类型。</p><h3><span id="sheng-ming-huan-jing-he-yi-lai">声明环境和依赖</span><a href="#sheng-ming-huan-jing-he-yi-lai" class="header-anchor"></a></h3><ul><li><code>image</code>，基础镜像，需要指明已提前准备好的语言镜像</li><li><code>deps</code>，dependencies 的简写, 声明使用的系统依赖以及对应的版本</li></ul><h3><span id="gou-jian-xiang-guan-he-xin-huan-jie">构建相关核心环节</span><a href="#gou-jian-xiang-guan-he-xin-huan-jie" class="header-anchor"></a></h3><ul><li><code>build</code>，构建的步骤，如 buildout, npm install ，或者执行一个脚本</li><li><code>test</code>，测试环节，应用需要声明构建的步骤，也可以在这里定制使用的 MySQL 以及对应的版本。构建系统会每次为其创建新的数据库，将关键信息 export 为环境变量。</li><li><code>post build</code>，最后一个环节，如发包，发 Slack 、邮件通知，或发布一个 Sentry release 等</li></ul><h3><span id="sheng-ming-artifact-lei-xing">声明 Artifact 类型</span><a href="#sheng-ming-artifact-lei-xing" class="header-anchor"></a></h3><p>artifact，用于选择部署的类型, 目前支持的有：</p><ul><li><code>tarball</code>：构建系统会将整个应用 Workspace 打包上传到 HDFS 用于后续的物理机部署</li><li><code>docker</code>：镜像会被 push 到私有的 Docker Registry 用于容器部署</li><li><code>static</code>：应用指定的路径打包后会被上传到 HDFS，用于后续的静态资源部署</li><li><code>offline</code>: 应用指定的文件会被上传到离线平台，用于离线任务的执行</li></ul><h2><span id="2-yu-yan-kai-fang-xing">2. 语言开放性</span><a href="#2-yu-yan-kai-fang-xing" class="header-anchor"></a></h2><p>早期所有的构建都在物理机上进行，构建之前需要提前在物理机上安装好对应的系统依赖，而如果遇到所需要的版本不同时，调度和维护的成本就高了很多。随着团队业务数量和种类的增加，技术选型的演进，这样的挑战越来越大。于是构建系统整体的优化方向由物理机向 Docker 容器化前进，如今，所有构建都容器中进行，基础的语言镜像由应用自己选择。</p><p>目前镜像管理的方式是:<br><img src="https://pic3.zhimg.com/80/v2-70e626008ffcdc8b7a6a691b36fa5f28_hd.jpg"></p><p>我们会事先准备好系统的基础镜像<br>在系统镜像的基础上，会构建出不同的语言镜像供应用使用，如 Python，Golang，Java，Node，Rust 的各种版本以及混合语言的镜像。<br>在应用指定的image语言镜像之上，会安装上 deps 指定的系统依赖，再构建出应用的镜像，应用会在这个环境里面进行构建测试等。</p><p>语言这一层的 Dockerfile 会被严格 review，通过的镜像才能被使用，以更好了解和支持业务技术选型和使用场景。</p><h2><span id="3-jian-shao-bu-wen-ding-gou-jian-jiang-di-wen-ti-fu-xian-cheng-ben">3. 减少不稳定构建，降低问题复现成本</span><a href="#3-jian-shao-bu-wen-ding-gou-jian-jiang-di-wen-ti-fu-xian-cheng-ben" class="header-anchor"></a></h2><h3><span id="huan-cun-de-she-ji">缓存的设计</span><a href="#huan-cun-de-she-ji" class="header-anchor"></a></h3><p>最开始构建的缓存是落在对应的 Jenkins Slave 上的，随着 Slave 数量的增多，应用构建被分配到不同 Slave 带来的代价也越来越大。</p><p>为了让 Slave 的管理更加灵活以及构建速度和 Slave 无关，我们最后将缓存按照应用使用的镜像和系统依赖作为缓存的标识，上传到 HDFS。在每次构建前拉取，构建之后再上传更新。</p><p>针对镜像涉及到的语言，我们会对常见的依赖进行缓存，如 eggs, node_modules, .ivy2&#x2F;cache, .ivy2&#x2F;repository。应用如果有其他的文件想要缓存，也支持在配置文件中指定。</p><h3><span id="yi-lai-huo-qu-wen-ding-xing">依赖获取稳定性</span><a href="#yi-lai-huo-qu-wen-ding-xing" class="header-anchor"></a></h3><p>在对整个构建时间的开销和不稳定因素的观察中，我们发现拉取外部依赖是个非常耗时且失败率较高的环节。</p><p>为了让这个过程更加稳定，我们做了以下的事情：</p><ul><li>完善内部不同语言的源</li><li>在不同语言的基础镜像中放入优先使用内部源的配置</li><li>搭建 HTTP Proxy，提供给以上覆盖不到的场景</li></ul><h3><span id="geng-di-de-pai-cha-cuo-wu-de-cheng-ben">更低的排查错误的成本</span><a href="#geng-di-de-pai-cha-cuo-wu-de-cheng-ben" class="header-anchor"></a></h3><p>本地开发和构建环境存在明显的差异，可能会出现本地构建成功但是在构建系统失败的情况。</p><p>为了让用户能够快速重现，我们在项目 docker-ssh 的基础上做了二次开发，支持直接 ssh 到容器进行调试。由于容器环境与其他人的构建相隔离，我们不必担心 ssh 权限导致的各种安全问题。构建失败的容器会多保留一天，之后便被回收。</p><h2><span id="4-gui-fan-he-biao-zhun-de-luo-di-zhua-shou">4. 规范和标准的落地抓手</span><a href="#4-gui-fan-he-biao-zhun-de-luo-di-zhua-shou" class="header-anchor"></a></h2><p>我们希望能给接入到构建系统的提高效率的同时，也希望能推动一些标准或者好的实践，比如完善测试。</p><p>围绕着测试和测试覆盖率，我们做了以下的事情：</p><ul><li>配置文件中强制要有测试环节。</li><li>应用测试结束之后，取到代码覆盖率的报告并打点。在提交的 Merge Request 评论中会给出现在的值和主分支的值的比较，以及最近主分支代码覆盖率的变化趋势。</li><li>在知乎有应用重要性的分级，对于重要的应用，构建系统会对其要求有测试覆盖率报告，以及更高的测试覆盖率。</li></ul><p><img src="https://pic1.zhimg.com/80/v2-b0fdafa005acee7e27dabb3cee1e04a3_hd.jpg"></p><p>对于团队内或者业界的基础库，如果发现有更稳定版本或者发现有严重问题，构建系统会按照应用的重要性，从低到高提示应用去升级或者去掉对应依赖。</p><p><img src="https://pic4.zhimg.com/80/v2-73b8b33cf384a682006ac232a54cc473_hd.jpg"></p><h2><span id="5-gao-ke-yong-he-ke-kuo-zhan-de-ji-qun">5. 高可用和可扩展的集群</span><a href="#5-gao-ke-yong-he-ke-kuo-zhan-de-ji-qun" class="header-anchor"></a></h2><h3><span id="job-diao-du-ce-lue">Job 调度策略</span><a href="#job-diao-du-ce-lue" class="header-anchor"></a></h3><p>Jenkins Master 只进行任务的调度，而实际执行是在不同的 Jenkins Node 上。</p><p>每个 Node 会被赋予一些 label 用于任务调度，比如：mysql:5.6, mysql:5.7, common 等。构建系统会根据应用的类型分配到不同的 label，由 Jenkins Master 去进一步调度任务到对应的 Node 上。</p><h3><span id="gao-ke-yong-she-ji">高可用设计</span><a href="#gao-ke-yong-she-ji" class="header-anchor"></a></h3><p>集群的设计如下，一个 Node 对应的是一台物理机，上面跑了 Jenkins Slave （分别连 Master 和 Master Standby），Docker Deamon 和 MySQL（为应用提供测试的 MySQL）。</p><p><img src="https://pic2.zhimg.com/80/v2-3914e13b5424ad6c68d3aa4609b84294_hd.jpg"></p><p>Slave 连接 Master 等待被调度，而当 Jenkins Slave 出现故障时，只需摘掉这台 Slave 的 label，后续将不会有任务调度调度上来。</p><p>而当 Jenkins Master 故障时，如果不能短时间启动起来时，集群可能就处于不可用状态了，从而影响整个构建部署。为了减少这种情况带来的不可用，我们采用了双 Master 模型，一台作为 Standby，如果其中一台出现异常就切换到另一台健康的 Master。</p><h3><span id="jian-kong-he-bao-jing">监控和报警</span><a href="#jian-kong-he-bao-jing" class="header-anchor"></a></h3><p>为了更好监控集群的运行状态，及时发现集群故障，我们加了一系列的监控报警，如：</p><ul><li>两个 Jenkins Master 是否可用，当前的排队数量情况。</li><li>集群里面所有 Jenkins Node 的在线状态，Node 被命中的情况。</li><li>Jenkins Job 的执行时间，是否有不合理的过长构建或者卡住。</li><li>以及集群机器的 CPU，内存，磁盘使用情况。</li></ul><h1><span id="hou-xu-de-ji-hua">后续的计划</span><a href="#hou-xu-de-ji-hua" class="header-anchor"></a></h1><p>在未来我们还希望完善以下的方面：</p><ul><li>Jenkins Slave 能更根据集群的负载情况进行动态扩容。</li><li>一个节点故障时能自动下掉并重新分配已经在上面执行的任务。一个 Master down 掉能被主动探测到并发生切换。</li><li>在 Merge Request 的构建环节推动更多的质量保证标准实施，如更多的接口自动化测试，减少有问题的代码被合并到主分支。</li></ul><p>主要开发者（排名不分先后）： @Amyyyyy @Cosven</p><h1><span id="can-kao-zi-liao">参考资料</span><a href="#can-kao-zi-liao" class="header-anchor"></a></h1><ul><li>Jenkinsfile 相关文档 <a target="_blank" rel="noopener" href="https://jenkins.io/doc/book/pipeline/jenkinsfile/">https://jenkins.io/doc/book/pipeline/jenkinsfile/</a></li><li>Jenkins Logo： <a target="_blank" rel="noopener" href="https://jenkins.io/">https://jenkins.io/</a></li><li>Docker Logo: Brand Guidelines</li></ul><div class="post__prevs"><div class="post__prev"><a href="/2018/09/03/AHA-%E6%80%A5%E6%95%91%E8%AF%BE%E7%A8%8B/" title="AHA Heartsaver 急救课程记录"><i class="iconfont icon-prev"></i>AHA Heartsaver 急救课程记录</a></div><div class="post__prev post__prev--right"><a href="/2018/10/06/2018_Sep_digest/" title="2018 年 9 月摘要">2018 年 9 月摘要<i class="iconfont icon-next"></i></a></div></div></div></article><div id="disqus_thread"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">Fledgling Developer | Backpacker | Doing all I can to be a better girl.</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/tech/">tech</a><span class="block-list-count">20</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/reading/">reading</a><span class="block-list-count">6</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/music/">music</a><span class="block-list-count">8</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/life/">life</a><span class="block-list-count">38</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2023/08/31/2022-Oct-digest/" title="2022 年 10 月 ~ 2023 年 8 月"><div class="item__cover"><img src="https://github.com/AmyLewis/blog/assets/3325198/06d4024a-6a6e-4bf1-a3e4-575a1eba9389" alt="2022 年 10 月 ~ 2023 年 8 月"></div><div class="item__info"><h3 class="item__title">2022 年 10 月 ~ 2023 年 8 月</h3><span class="item__text">2023-08-31</span></div></a></li><li class="latest-post-item"><a href="/2022/09/30/2022-02-09-digest/" title="2022 年 2 ~ 9 月摘要"><div class="item__cover"><img src="https://user-images.githubusercontent.com/3325198/194582186-ee38f13c-5d74-42e4-b1c1-90045c865a09.jpeg" alt="2022 年 2 ~ 9 月摘要"></div><div class="item__info"><h3 class="item__title">2022 年 2 ~ 9 月摘要</h3><span class="item__text">2022-09-30</span></div></a></li><li class="latest-post-item"><a href="/2022/01/31/2021-12-digest/" title="2021 年 12 月 & 1 月摘要"><div class="item__cover"><img src="https://user-images.githubusercontent.com/3325198/152668876-eb16783b-8204-432e-9d98-17a9e5a9b510.jpeg" alt="2021 年 12 月 & 1 月摘要"></div><div class="item__info"><h3 class="item__title">2021 年 12 月 & 1 月摘要</h3><span class="item__text">2022-01-31</span></div></a></li><li class="latest-post-item"><a href="/2021/11/30/2021-11-digest/" title="2021 年 11 月摘要"><div class="item__cover"><img src="https://user-images.githubusercontent.com/3325198/145077778-da1bc9f0-d052-423e-a8a2-4128c1fe12ee.jpeg" alt="2021 年 11 月摘要"></div><div class="item__info"><h3 class="item__title">2021 年 11 月摘要</h3><span class="item__text">2021-11-30</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-item"><a class="tag-link" href="/tags/code-reading/">code_reading</a></li><li class="tag-item"><a class="tag-link" href="/tags/cookbook/">cookbook</a></li><li class="tag-item"><a class="tag-link" href="/tags/digest/">digest</a></li><li class="tag-item"><a class="tag-link" href="/tags/life/">life</a></li><li class="tag-item"><a class="tag-link" href="/tags/music-log/">music_log</a></li><li class="tag-item"><a class="tag-link" href="/tags/reading/">reading</a></li><li class="tag-item"><a class="tag-link" href="/tags/tech/">tech</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%AE%9E%E9%AA%8C/">实验</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2018 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>, modified by <a href="https://github.com/AmyLewis" target="_blank">amy</a></p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/AmyLewis" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:amylewis.private@gmail.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script>var disqus_shortname="amylewis777",disqus_config=function(){this.page.url="http://amylewis.github.io/2018/10/01/CI-design/",this.page.identifier="/2018/10/01/CI-design/",this.page.title="知乎容器化构建系统设计和实践"};!function(){var t=document,e=t.createElement("script");e.src="https://"+disqus_shortname+".disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></body></html>